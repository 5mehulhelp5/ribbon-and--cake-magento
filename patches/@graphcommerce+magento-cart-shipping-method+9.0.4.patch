diff --git a/node_modules/@graphcommerce/magento-cart-shipping-method/components/ShippingMethodForm/GetShippingMethods.graphql b/node_modules/@graphcommerce/magento-cart-shipping-method/components/ShippingMethodForm/GetShippingMethods.graphql
index bbf68aa..c92f143 100644
--- a/node_modules/@graphcommerce/magento-cart-shipping-method/components/ShippingMethodForm/GetShippingMethods.graphql
+++ b/node_modules/@graphcommerce/magento-cart-shipping-method/components/ShippingMethodForm/GetShippingMethods.graphql
@@ -1,6 +1,23 @@
 query GetShippingMethods($cartId: String!) {
   cart(cart_id: $cartId) {
     id
+    shipping_addresses{
+      firstname
+      lastname
+      country{
+        code
+      }
+      telephone
+      pickup_location_code
+    }
+    billing_address{
+      firstname
+      lastname
+      country{
+        code
+      }
+      telephone
+    }
     ...AvailableShippingMethods
   }
 }
diff --git a/node_modules/@graphcommerce/magento-cart-shipping-method/components/ShippingMethodForm/ShippingMethodForm.tsx b/node_modules/@graphcommerce/magento-cart-shipping-method/components/ShippingMethodForm/ShippingMethodForm.tsx
index 2df7a90..67a9a15 100644
--- a/node_modules/@graphcommerce/magento-cart-shipping-method/components/ShippingMethodForm/ShippingMethodForm.tsx
+++ b/node_modules/@graphcommerce/magento-cart-shipping-method/components/ShippingMethodForm/ShippingMethodForm.tsx
@@ -27,18 +27,19 @@ import { ShippingMethodFormDocument } from './ShippingMethodForm.gql'
 
 export type ShippingMethodFormProps = Pick<UseFormComposeOptions, 'step'> & {
   sx?: SxProps<Theme>
+  isPickup?: boolean
   children?: React.ReactNode
 } & UseFormGraphQlOptions<
-    ShippingMethodFormMutation,
-    ShippingMethodFormMutationVariables & { carrierMethod?: string }
-  >
+  ShippingMethodFormMutation,
+  ShippingMethodFormMutationVariables & { carrierMethod?: string }
+>
 
 function notEmpty<TValue>(value: TValue | null | undefined): value is TValue {
   return value !== null && value !== undefined
 }
 
 export function ShippingMethodForm(props: ShippingMethodFormProps) {
-  const { step, sx, children, onBeforeSubmit = (vars) => vars, ...options } = props
+  const { step, sx, children, onBeforeSubmit = (vars) => vars, isPickup = false, ...options } = props
   const { data: cartQuery } = useCartQuery(GetShippingMethodsDocument)
 
   const shippingAddress = cartQuery?.cart?.shipping_addresses?.[0]
@@ -75,13 +76,26 @@ export function ShippingMethodForm(props: ShippingMethodFormProps) {
     defaultValues: { carrierMethod },
     onBeforeSubmit: (variables) => {
       const [carrier, method] = (variables.carrierMethod ?? '').split('-')
+      console.log(carrier, method, "==>carrier")
+      if (carrier === "instore") {
+        return onBeforeSubmit({ ...variables, carrier, method: "pickup" })
+      }
+
+      if (carrier === "cityrate") {
+        return onBeforeSubmit({ ...variables, carrier, method: "cityrate" })
+      }
+
+      if (carrier === "flatrate") {
+        return onBeforeSubmit({ ...variables, carrier, method: "flatrate" })
+      }
+
       return onBeforeSubmit({ ...variables, carrier, method })
     },
     ...options,
   })
 
   const { handleSubmit, control, error, setValue } = form
-  const submit = handleSubmit(() => {})
+  const submit = handleSubmit(() => { })
 
   useFormCompose({ form, step, submit, key: 'ShippingMethodForm' })
 
@@ -113,8 +127,17 @@ export function ShippingMethodForm(props: ShippingMethodFormProps) {
     }
   }, [shippingAddress, firstCarrierMethod, carrierMethod, setValue])
 
+  useEffect(() => {
+    if (isPickup && shippingAddress?.pickup_location_code) {
+      setValue('carrierMethod', "instore", { shouldValidate: true })
+    } else {
+      setValue('carrierMethod', availableMethods?.[0]?.carrier_code, { shouldValidate: true })
+    }
+  }, [shippingAddress, firstCarrierMethod, carrierMethod, setValue])
+
   return (
-    <FormProvider {...form}>
+    <>
+      {/* <FormProvider {...form}>
       <FormAutoSubmit
         control={control}
         submit={submit}
@@ -132,16 +155,18 @@ export function ShippingMethodForm(props: ShippingMethodFormProps) {
           name='carrierMethod'
           size='large'
           color='secondary'
-          rules={{ required: i18n._(/* i18n */ 'Please select a shipping method') }}
-          items={renderItems}
-          render={
-            ShippingMethodActionCard as React.FC<ActionCardItemRenderProps<ActionCardItemBase>>
-          }
+          rules={{ required: i18n._('Please select a shipping method') }}
+      items={renderItems}
+      render={
+        ShippingMethodActionCard as React.FC<ActionCardItemRenderProps<ActionCardItemBase>>
+      }
         />
-        <ApolloCartErrorAlert error={error} />
-      </Form>
-      {children}
-    </FormProvider>
+      <ApolloCartErrorAlert error={error} />
+    </Form >
+      { children }
+    </FormProvider > */
+      }
+    </>
   )
 }
 
